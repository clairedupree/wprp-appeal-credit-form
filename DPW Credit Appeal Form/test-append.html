<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<!-- REMOTE Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!---->
  
  <!-- LOCAL Bootstrap CSS -->
  <link rel="stylesheet" href="https://www.aacounty.org/_template-assets/css/bootstrap4-iso.min.css" />
  <!---->

	<!-- FontAwesome Icon Library -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
		integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <title>Appeal / Credit Application</title>

  <!-- Embedded styles -->
	<style>
		.requiredField {
			color: red;
		}

    i {
      margin-right: 5px;
    }

    /* .appealOptions initialized to not visible because of multi-select mechanism, .creditOptions are single-select*/
    .common, .uncommon, .creditApplication, .appealApplication  {
      display: none;
    }
    

    .row {
      /* using .form-group for padding */
      /* .row used for organization & responsiveness */
        padding: 0px !important;
        background: none !important;
        border-top: 0px !important;
        margin: auto !important;
    }
    
    .dropdown-menu {
      text-align: center !important;
    }
	</style>

</head>

 
<!------------------------------------------------------------------------------------------------
  TO DO:

  - write json console.log function
    - help w/ multi-select json translation


  - write remaining forms


  - evaluate checks on continue
    - make continue step intermediate 
    - how to valute whether checs have been checked
  

  - remove individual required attributes
    - when visible, add "required" element
    - could also aadd your own validation function

  
  Step 1: find the hello world version of the thing youre trying to do
  Step 2: get the basic mechanism of it working
  Step 3: add complexity from there


  https://codepen.io/jlengstorf/pen/YWJLwz?editors=0110


------------------------------------------------------------------------------------------------->

<!--
naming conventions hierarchy
----------------------------
#applicationTypes

form name: dpwAppealCreditApplication
#formContainer

.common
#commonBeginning   
#commonEnding

.uncommon
#appealTypes
  #appealType1-
#creditTypes
  #creditType1-

.appealApplication
  .appealType1-
.creditApplication
  .creditType1-
  


  saving mnarkup into variables, append to div
  common begining
  div
  common end

  or $("input").prop('required',true);
  to add required tag to an element

-->





<body>
  <div class="bootstrap-iso">
    
  <!-- CREDIT & APPEAL BUTTONS -->
  <div id="applicationTypes">

    <div class="row">
      <div class="col-6">
        <button class="btn btn-dark btn-block" id="appealTypes"><i class='far fa-comment'></i>Appeal</button>
      </div>
      
      <div class="col-6">
        <button class="btn btn-dark btn-block" id="creditTypes"><i class='fas fa-edit'></i>Credit</button>
      </div>
    </div>  
  </div>




  <div id="typeSelect">

    <div id="formNavigation" class="common">
      <div class="row">

        <!-- Error message box -->
        <div class="col-8 form-group">
          <p id="showError" class="requiredField" style="text-align: center">Text should be replaced by an error message</p>
        </div>

        <!-- Go Back button -->
        <div id="backButton" class="col-4 form-group">
          <button class="btn btn-light btn-block">Go Back</button>
        </div>
      </div>
    </div>



    <!-- Select Appeal Type(s) -->
    <div id="aappealTypes" class="appealTypes uncommon">
      <div class="row">
        <div id="appealChecks" class="col-12 form-group">
          <h5>Select the reason(s) for the appeal:</h5>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType1" name="appealCheckbox" 
              value="Property placed in wrong residential tier">
            <label class="form-check-label" for="appealType1">Property placed in wrong residential tier</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType2" name="appealCheckbox" 
              value="Incorrect classification of property">
            <label class="form-check-label" for="appealType2">Incorrect classification of property</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType3" name="appealCheckbox" 
              value="Homeowner's Association property where the fee cap is applicable but was not applied">
            <label class="form-check-label" for="appealType3">Homeowner's Association property where the fee cap is applicable but was not applied</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType4" name="appealCheckbox" 
              value="Mathematical error or incorrect impervious surface calculation">
            <label class="form-check-label" for="appealType3">Mathematical error or incorrect impervious surface calculation</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType5" name="appealCheckbox" 
              value="Exempt or incorrect property owner">
            <label class="form-check-label" for="appealType3">Exempt or incorrect property owner</label>
          </div>

        </div> 
      </div>

      <!-- event listener validates checkboxes on click -->
      <div class="row">
        <div class="col-12 text-center form-group">
          <button type="button" class="btn btn-primary" id="continueButton">Continue</button>
        </div>
      </div>
    </div>

    

    <!-- Select Credit Type -->
    <div id="ccreditTypes" class="creditTypes uncommon">
      <div class="row">
        <div class="col-12 form-group">
          <h5>Select the credit type:</h5>
          <button class="btn btn-light btn-block" value="Property not under an NPDES permit" 
            id="creditType1">Property not under an NPDES	permit</button>
          <button class="btn btn-light btn-block" value="Property with an NPDES permit that includes stormwater management controls" 
            id="creditType2">Property with an NPDES permit that includes	stormwater management controls</button>
        </div>
      </div>
    </div>



    <!-- Main Application Type Header -->
    <div class="row">
      <div class="col-12">
          <h4 id="appealHeader" class="appealApplication uncommon">Stormwater Fee Appeal Application</h4>
          <h4 id="creditHeader" class="creditApplication uncommon">Stormwater Credit Application</h4>
        </div>
      </div>

  </div> <!-- end type select -->

  <!-- FORM CONTAINER -->
	<div id="formContainer">
	  <!-- Form -->
		<form id="dpwAppealCreditApplication" name="dpwAppealCreditApplication" class="form">

      <!-- COMMON BEGINNING -->
      <div id="commonBeginning" class="common">

        <!-- Owner Information -->
        <div class="row">
          <div class="col-12">
            <h5>Owner Information</h5>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentFirstName">First Name: <span class="requiredField">*</span></label>
              <input type="text"  name="constituentFirstName" id="constituentFirstName" class="form-control"  >
            </div>
          </div>

          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentLastName">Last Name: <span class="requiredField">*</span></label>
              <input type="text" name="constituentLastName" id="constituentLastName" class="form-control"  >
            </div>
          </div>
        </div>

        <div class="row">  
          <div class="col-12">
            <div class="form-group">
              <label for="constituentOrganization">Company / Organization (if applicable):</label>
              <input type="text" name="constituentOrganization" id="constituentOrganization" class="form-control">
            </div>
          </div>
        </div>

        <!-- Tax Account(s) -->
        <div class="row">
          <div class="col-12">
            <h5>Tax Accounts</h5> <!-- TODO: header necessary?-->
          </div>

          <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <div class="form-group">
              <label for="constituentTaxAccounts">Tax account number(s): <span class="requiredField">*</span></label>
              <input type="text" name="constituentTaxAccounts" id="constituentTaxAccounts" class="form-control"  >
              <!-- TODO: form-text block necessary? -->
              <div class="form-text"><a href="https://sdat.dat.maryland.gov/RealProperty/Pages/default.aspx" target="_blank">Look up your tax account number</a></div>
            </div>
          </div>	
        </div>

        <!-- Property Address -->
        <div class="row">
          <div class="col-12">
            <h5>Property Address</h5>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentAddress1">Street Address: <span class="requiredField">*</span></label>
              <input type="text" name="constituentAddress1" id="constituentAddress1" class="form-control"  >
            </div>
          </div>

          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentAddress2">Address Line 2:</label>
              <input type="text" name="constituentAddress2" id="constituentAddress2" class="form-control" >
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
            <div class="form-group">
              <label for="ownerCity">City: <span class="requiredField">*</span></label>
              <input type="text" name="ownerCity" id="ownerCity" class="form-control"  >
            </div>
          </div>   
          
          <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
            <div class="form-group">
              <label for="ownerState">State: <span class="requiredField">*</span></label>
              <input type="text" name="ownerState" id="ownerState" class="form-control"  >
            </div>
          </div>   

          <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
            <div class="form-group">
              <label for="ownerZip">Zip Code: <span class="requiredField">*</span></label>
              <input type="text" name="ownerZip" id="ownerZip" class="form-control"  >
            </div>
          </div>
        </div>
      </div> <!-- end common beginning -->

      <div class="row">
        <div class="col-12 text-center form-group">
          <button type="button" class="btn btn-primary" id="append" onclick="show()">Add Appeal Type 1</button>
        </div>
      </div>

      <div id="uncommonMiddle">Options will be appended</div>


      <!-- APPEAL OPTIONS-->
      <div class="appealApplication">

        <!-- APPEAL TYPE 1: Property placed in wrong residential tier -->
        <div class="appealType1 uncommon"> 

          <div class="row">
            <div class="col-12">
              <h5>Appeal Basis: Property placed in wrong residental tier</h5>
            </div>
          </div>

          <!-- Residental Property Tier info -->
          <div class="row form-group">
            <div class="col-12">
              <div style="background-color: #f0f0f0; padding: 10px">
                <b><i class="fas fa-info-circle" style="color: #0072bc; margin-right: 5px"></i>List of Residential Tiers</b>
                <ul style="margin-left: 20px">
                  <li>WPRF01 / Tier 1: Residential property with a detached single family dwelling in Rural Agricultural (RA) or
                    Residential Low Density (RLD) zoning</li>
                  <li>WPRF02 / Tier 2: Residential property with a detached single family dwelling in R1, R2, or R5 residential
                    zoning</li>
                  <li>WPRF03 / Tier 3: Residential property in R10 or R15 residential zoning or an attached dwelling in RA, 
                    RLD, R1, R2, or R5 zoning
                  </li>
                </ul>
              </div>
            </div>
          </div>
          
          <div class="row form-group">
            <div class="col-12">
              <!-- TODO: change formatting? of "property bill"-->
              On the property tax bill, <br>
              <div class="form-select">
                <label for="a1TierCurrent">The property is currently classified as: 
                  <span class="requiredField">*</span></label>
                <select class="form-select" name="a1TierCurrent" id="a1TierCurrent" aria-label="a1TierCurrent"  >
                  <option selected value="">Please select</option>
                  <option value="WPRF01">WPRF01: Tier 1 Residential</option>
                  <option value="WPRF02">WPRF02: Tier 2 Residential</option>
                  <option value="WPRF03">WPRF03: Tier 3 Residential</option>
                </select>
              </div>
            </div>

            <div class="col-12">
              <div class="form-select">
                <label for="a1TierProposed">The property should be classified as: 
                  <span class="requiredField">*</span></label>
                <select class="form-select" name="a1TierProposed" id="a1TierProposed" aria-label="a1TierProposed"  >
                  <option selected value="">Please select</option>
                  <option value="WPRF01">WPRF01: Tier 1 Residential</option>
                  <option value="WPRF02">WPRF02: Tier 2 Residential</option>
                  <option value="WPRF03">WPRF03: Tier 3 Residential</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row form-group">

            <div class="col-12">
              Reason: <span class="requiredField">*</span><br>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="a1Reason1" name="a1Reason" 
                  value="The property's tier is incorrect based on its zoning"  >
                <label class="form-check-label" for="a1Reason1">The property's tier is incorrect based on its zoning</label>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="radio" id="a1Reason2" name="a1Reason" 
                  value="The property is an attached dwelling in residential zoning but is not categorized as Tier 3"  >
                <label class="form-check-label" for="a1Reason2">The property is an attached dwelling in residential zoning but is not 
                    categorized as Tier 3</label>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="radio" id="a1Reason3" name="a1Reason" 
                  value="The property should be classified as the next lower tier due to the amount of impervious surface on site"  >
                <label class="form-check-label" for="a1Reason3">The property should be classified as the next lower tier due to the 
                    amount of impervious surface on site (Less than 2,900 sq ft for a Tier 1 property; 
                    Less than 1,200 sq ft for a Tier 2 property)</label>
              </div>
            </div>
          </div>

          <!-- TODO: include this in the radio button form-group row? -->
          <div class="row form-group">
            <div class="col-12">
              <div id="a1ReasonHelpBlock" class="form-text">Use the <a href="www.aacounty.org/myannearundel" target="_blank">
                My Anne Arundel application</a> to look up information on the stormwater fee, impervious amounts, and property zoning. 
              </div>
            </div>
          </div>

          <div class="row form-group">
            <div class="col-12">
                <label for="a1Comments">Comments: </label>
                <textarea class="form-control" id="a1Comments" rows="3"></textarea>
            </div>
          </div>
        </div> <!--end appeal 1 options-->



        <!-- APPEAL TYPE 2: Incorrect classification of	property -->
        <div id="a2Options" class="appealType2 uncommon">

          <div class="row">
            <div class="col-12">
              <h5>Appeal Basis: Incorrect classification of	property</h5>
            </div>
          </div>
        </div> <!--end appeal 2 options-->



        <!-- APPEAL TYPE 3: Homeowner's Association property where the fee cap is applicable but was not applied -->
        <div id="a3Options" class="appealType3 uncommon">
          <div class="row">
            <div class="col-12">
              <h5>Appeal Basis: Homeowner's Association property where the fee cap is 
                applicable but was not applied</h5>
            </div>
          </div>
        </div>



        <!-- APPEAL TYPE 4: Mathematical error or incorrect	impervious surface calculation -->
        <div id="a4Options" class="appealType4 uncommon">
          <div class="row">
            <div class="col-12">
              <h5>Appeal Basis: Mathematical error or incorrect	impervious surface calculation</h5>
            </div>
          </div>
        </div>



        <!-- APPEAL TYPE 5: Exempt or incorrect property owner -->  
        <div id="a5Options" class="appealType5 uncommon">
          <div class="row">
            <div class="col-12">
              <h5>Appeal Basis: Exempt or incorrect property owner</h5>
            </div>
          </div>
        </div>

      </div> <!-- END APPEAL APP -->


      <!-- CREDIT OPTIONS-->
      <div class="creditApplication">

        <!-- CREDIT TYPE 1:  -->
        <div class="creditType1 uncommon">
          <div class="row">
            <div class="col-12">
              <h5>Credit Type: Property not under an NPDES permit</h5>
            </div>
          </div>

          <div class="row form-group">
            <div class="col-12">
                <label for="c1Description">Briefly describe the stormwater practices on the property (type, quantity, location): </label>
                <textarea class="form-control" id="c1Description" rows="3"></textarea>
            </div>
          </div>
        </div>



        <!-- CREDIT TYPE 2:  -->
        <div class="creditType2 uncommon">
          <div class="row">
            <div class="col-12">
              <h5>Credit Type: Property with an NPDES permit that includes stormwater management controls</h5>
            </div>
          </div> 

          <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
              <div class="form-group">
                <label for="c2NPDESPermitNumber">NPDES Permit Number: <span class="requiredField">*</span></label>
                <input type="text" id="c2NPDESPermitNumber" class="form-control"  >
              </div>
            </div>
  
            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
              <div class="form-group">
                <label for="c2RegistrationNumber">MDE Facility Registration Number: </label>
                <input type="text" id="c2RegistrationNumber" class="form-control" >
              </div>
            </div>
          </div>
        </div>

      </div> <!-- END CREDIT OPTIONS-->


      <!-- COMMON ENDING -->
      <div id="commonEnding" class="common">

        <!-- Submit -->
        <div class="row">
          <div class="col-12">
            <div id="requiredHelpBlock" class="form-text">
              <p>Fields marked with <span class="requiredField">*</span> are required</p>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <button class="btn btn-primary" type="submit" id="submitButton" >Submit Form</button>
          </div>
        </div>
      </div> <!-- END COMMON ENDING -->

		</form> <!-- END FORM -->
  </div><!--END FORM CONTAINER-->
</div> <!-- end bootstrap-iso container -->
	
  
  <!-- Script imports -->
  <!-- jQuery (must come before Bootstrap & Popper.js) -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>

  <!-- Popper.js (must come after jQuery, before Bootstrap js) -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" 
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" 
    crossorigin="anonymous"></script>

  <!-- Bootstrap js script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" 
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" 
    crossorigin="anonymous"></script>
</body>




<!-- JavaScript -->
<script type="text/javascript">
  
  let selected = []; //user selection array
  const jsonData = {}; //json submit object
  let appealType1, appealType2, appealType3, appealType4, appealType5 = ""; //will contain uncommon form HTML markup
  let creditType1, creditType2 = ""; //will contain uncommon form HTML markup

  appealType1 = '<div class="row"><div class="col-12"><h5>Appeal Basis: Property placed in wrong residental tier</h5></div></div>'

  function show() {
    $("#uncommonMiddle").append(appealType1);
  }

  /* Show credit or appeal types to select
  @param the selected application type / credit or appeal */
  /* Show credit application*/ 

  // CAN YOU REFERENCE ELEMENTS BY NAME INSTEAD OF ID TO KEEP THINGS CLEANER?
  //document.querySelector('[name="first_name"]') 
  //also consider use of queryselector vs getelementby... class or id

  //change to a function to also be called by back button
  document.querySelectorAll("#appealTypes, #creditTypes").forEach((applicationType) => {
  applicationType.addEventListener('click', function(event) {
    //complete reset selected array
    selected.length = 0;
    //add selected credit type to array
    selected.push(applicationType.id);
    $("#showError").html("You selected: " + selected);
    //show / hide      
    $("." + selected[0]).show();

    $("#formNavigation").show();
    $("#applicationTypes").hide();

    console.log(JSON.stringify(selected));
  }); 
});

  // function showTypes(selectedType) {
  //   $(selectedType).show();
  //   $("#formNavigation").show();
  //   $("#applicationTypes").hide();
  // }

  /* Show credit application*/ 
  //change to a function to also be called by back button (simpler argument calls also)
  document.querySelectorAll("#creditType1, #creditType2").forEach((creditType) => {
    creditType.addEventListener('click', function(event) {
      //truncate selected array to only include app type
      selected.length = 1;
      console.log(JSON.stringify(selected));
      //add selected credit type to array
      selected.push(creditType.id);
      $("#showError").html("You selected: " + selected);
      //show / hide      
      $("." + selected[0]).show();

      //$(selectedCreditType).show();
      $("#applicationTypes, #creditTypes").hide();
      $(".common, .creditApplication").show();
      console.log(JSON.stringify(selected));
    }); 
  });


   /* Show appeal application */
   //change to a function to also be called by back button
  const continueButton = document.getElementById("continueButton");
  continueButton.addEventListener('click', (event) => {
  //function showAppealTypes() {
    console.log("call showAppealOptions()");
    // if validation is false, alert console
    if (validateCheckboxes(".appealTypes") == false)
      //alert("Please select at least one appeal type.");
      $("#showError").html("Please select at least one appeal type.");

    // if checkboxes pass validation,
    else
    {
      //show .common elements
      $(".common, .appealApplication").show();

      // display checked, hide unchecked (and add selected elements to array)
      showSelectedChecks();

      //hide menu options
      $(".appealTypes").hide();
    }  
    console.log("End showAppealOptions()");
  });

  //show associated classes of checked checkboxes, add selected to array
  function showSelectedChecks() {
    //store the appealTypes checkbox into a variable
    let appealCheckbox = document.querySelectorAll('input[name="appealCheckbox"]');
    //create an array to store the current appeal type IDs
    // OR change the div ids to classes that match
    let appealTypeIds = [];

    // for each checkbox element, push the id to the appealtype array
    appealCheckbox.forEach((checkbox) => {
      appealTypeIds.push(checkbox.id); //will be used to toggle divs
    });
    console.log(JSON.stringify(appealTypeIds));

    //trunmcate the contents of the selected array
    selected.length = 1;

    for (var i = 0; i < appealTypeIds.length; i++)
    {
      // if the id stored in the checkbox array is checked,
      if (document.getElementById(appealTypeIds[i]).checked) {
        // print to console, push value to selected array, show the associated .class divs
        console.log("\tChecked: " + appealTypeIds[i]);
        selected.push(appealTypeIds[i]);
        $("." + appealTypeIds[i]).show();
      }
      // if the id stored in the checkbox array is NOT checked,
      else if (!document.getElementById(appealTypeIds[i]).checked)
      {
        // print to console, hide the associated .class divs
        console.log("\tNot checked: " + appealTypeIds[i]);
        $("." + appealTypeIds[i]).hide();
      }

      // if neither o above option, print error to console          
      else 
        console.log("Error w appeal checkbox array");
    } 
    //print selected check options to console
    console.log("\tArray of selections inside method: " + JSON.stringify(selected));
    //print oprions to user (test)
    $("#showError").html("You selected: " + selected);
  }

  //determine if number of checked checkboxes in an element is > 0
  //@param the id of the element you want to check
  function validateCheckboxes(element) {
      console.log("call ValidateCheckBoxes")
      //Reference the CheckBoxes and determine Total Count of checked CheckBoxes.
      var numChecked = $(element + " input[type=checkbox]:checked").length;
        console.log("\tElement being validated: " + element);
        console.log("\tNumber checked: " + numChecked);

      console.log("\t" + numChecked + " checkboxes are checked.");

      if (numChecked > 0) {
          return true;
          console.log("\tTRUE")
      } else {
          console.log("\tFALSE")
          return false;
      }
  }




  
  // @Desc: Handle Form Submit
  const form = document.getElementById('dpwAppealCreditApplication');
  form.addEventListener('submit', (event) => {
    // event.preventDefault(); //lookup
    console.log(event);

    //json app type
    //do first, index[0] in seelcted array
    if (selected[0] == "appealTypes")
      jsonData.applicationType = "Appeal Application";
    else if (selected[0] == "creditTypes")
      jsonData.applicationType = "Credit Application";
    else
      jsonData.applicationType = $("error").val();

    //then, populate common json data
    jsonData.caseTypeId = $('').val
    jsonData.constituentFirstName = $('#constituentFirstName').val();
    jsonData.constituentLastName = $('#constituentLastName').val();
    jsonData.constituentAddress1 = $('#constituentAddress1').val();
    jsonData.constituentAddress1 = $('#constituentAddress1').val();
    jsonData.ownerCity = $('#ownerCity').val();
    jsonData.ownerState = $('#ownerState').val();
    jsonData.ownerZip = $('#ownerZip').val();

    //then, populate uncommon selections from array
    for (var i = 0; i < selected.length; i++)
      populateUncommonJson(selected[i]);

    console.log(JSON.stringify(jsonData));
  });

  
  //populate json based on user selection
  function populateUncommonJson(element) {
    console.log('populateUncommonJson()');

    switch (element) {
      case 'appealType1':
        jsonData.appealType1 = $('#appealType1').val();
        jsonData.a1TierCurrent = $('#a1TierCurrent').val();
        jsonData.a1TierProposed = $('#a1TierProposed').val();
        jsonData.a1Reason = $('#a1Reason').val();
        jsonData.a1Comments = $('#a1Comments').val();
        break;

      case 'creditType1':
        jsonData.creditType1 = $('#creditType2').val();
        jsonData.c1Description = $('#c1Description').val();
        break;

      case 'creditType2':
        jsonData.creditType1 = $('#creditType2').val();          
        jsonData.c2NPDESPermitNumber = $('#c2NPDESPermitNumber').val();
        jsonData.c2RegistrationNumber = $('#c2RegistrationNumber').val();
        break;

      default:
        console.log("Error: populate uncommon json default.")
    }
  }



  (function($) {
    $(document).ready(function() {

    // REDUCE THIS CODE
    //consider changing event listeners to functions that can be called for the back button as well
    //clean up classes / ids (use queryselector())


    // on click, determie what is currently displayed
      $("#backButton").click(function() {

        //when on a credit select page:
        if ($(".creditTypes").is(":visible")) {
          console.log("Leaving credit menu options")
          //showapplicationTypes();
          window.location.reload();
        }

        //when on an appeal select page:
        else if ($(".appealTypes").is(":visible")) {
          console.log("Leaving appeal menu options")
          //showApplicationTypes();
          window.location.reload();
        }

        //add more phases as you build the rest
        //when on an appeal application:
        else if ($(".appealApplication").is(":visible")) {
          console.log("Leaving appeal application")
          //showAppealTypes();
          window.location.reload();
        }

        //when on a credit application:
        else if ($(".creditApplication").is(":visible")) {
          console.log("Leaving credit application")
          //showCreditTypes();
          window.location.reload();
        }

        // if none is true, refresh page as fail-safe
        else {
          console.log("General page refresh.")
          window.location.reload();
        }
      });


    });
  })(jQuery);

</script>
</html>