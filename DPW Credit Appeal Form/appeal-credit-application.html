<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<!-- REMOTE Bootstrap CSS --
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!---->
  
  <!-- LOCAL Bootstrap CSS -->
  <link rel="stylesheet" href="https://www.aacounty.org/_template-assets/css/bootstrap4-iso.min.css" />
  <!---->

	<!-- FontAwesome Icon Library -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
		integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <title>Appeal / Credit Application</title>

  <!-- Embedded styles -->
	<style>
		.requiredField {
			color: red;
		}

    i {
      margin-right: 5px;
    }

    .row {
      /* using .form-group for padding */
      /* .row used for organization & responsiveness */
        padding: 0px !important;
        background: none !important;
        border-top: 0px !important;
        margin: auto !important;
    }
    
    .dropdown-menu {
      text-align: center !important;
    }
	</style>
</head>

<!-- TODO: 

  TODO: Thursday, 3/12/22

  schedule a meeting w/ ryan
  delete vestigial element names, classes, variables and ids
  implement javascript doc comments

  Questions for ryan:
    document upload
    signature
    casemanager base names
    testing JSON posting
  

  Step 1: find the hello world version of the thing youre trying to do
  Step 2: get the basic mechanism of it working
  Step 3: add complexity from there

  or $("input").prop('required',true);
  to add required tag to an element

-->




<body>
  <div class="bootstrap-iso">

  <!-- Back Button -->
  <div id="navigation" style="display: none">
    <div class="row">

      <!-- Error message box -->
      <!-- TODO: Replace with a custom reportValidity(); -->
      <!-- https://stackoverflow.com/questions/56406865/how-do-i-trigger-html5-validation-error-popup-when-custom-validation-message-is -->
      <div class="col-8 form-group">
        <p id="showError" class="requiredField" style="text-align: center">Text should be replaced by an error message</p>
      </div>

      <!-- Go Back button -->
      <div id="backButton" class="col-4 form-group">
        <button class="btn btn-light btn-block">Go Back</button>
      </div>
    </div>
  </div>  
  


  <!-- SELECT APPLICATION TYPE -->
  <div id="applicationSelect">

    <div class="row applicationSelect">
      <div class="col-6">
        <button class="btn btn-dark btn-block" name="appeal" id="appealButton" onclick="showApplicationTypes('appeal')">
          <i class='far fa-comment'></i>Appeal</button>
      </div>
      
      <div class="col-6 applicationSelect">
        <button class="btn btn-dark btn-block" name="credit" id="creditButton"onclick="showApplicationTypes('credit')">
          <i class='fas fa-edit'></i>Credit</button>
      </div>
    </div>  
  </div>



  <!-- SELECT APPEAL or CREDIT TYPE -->
  <div id="typeSelect">

    <!-- Select Appeal Type(s) -->
    <div id="appeal" style="display: none">
      <div class="row">
        <div id="appealChecks" class="col-12 form-group">
          <h5>Select the reason(s) for the appeal:</h5>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType1" name="appealCheckbox" 
              value="Property placed in wrong residential tier">
            <label class="form-check-label" for="appealType1">Property placed in wrong residential tier</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType2" name="appealCheckbox" 
              value="Incorrect classification of property">
            <label class="form-check-label" for="appealType2">Incorrect classification of property</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType3" name="appealCheckbox" value="Homeowner's Association property 
              where the fee cap is applicable but was not applied">
            <label class="form-check-label" for="appealType3">Homeowner's Association property where the fee cap is applicable but was not applied</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType4" name="appealCheckbox" 
              value="Mathematical error or incorrect impervious surface calculation">
            <label class="form-check-label" for="appealType4">Mathematical error or incorrect impervious surface calculation</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="appealType5" name="appealCheckbox" 
              value="Exempt or incorrect property owner">
            <label class="form-check-label" for="appealType5">Exempt or incorrect property owner</label>
          </div>
        </div> 
      </div>

      <!-- Continue button -->
      <div class="row">
        <div class="col-12 text-center form-group">
          <!-- onclick: validates checkboxes, resets selections, appends new selections -->
          <button type="button" class="btn btn-primary" id="continueButton" onclick="showAppealApplication()">Continue</button>
        </div>
      </div>
    </div>


    <!-- Select Credit Type -->
    <div id="credit" style="display: none">
      <div class="row">
        <div class="col-12 form-group">
          <h5>Select the credit type:</h5>
          <button class="btn btn-light btn-block" value="Property not under an NPDES permit" 
            id="creditType1" onclick="showCreditApplication('creditType1')">Property not under an NPDES	permit</button>
          <button class="btn btn-light btn-block" value="Property with an NPDES permit that includes stormwater management controls" 
            id="creditType2" onclick="showCreditApplication('creditType2')">Property with an NPDES permit that includes	stormwater management controls</button>
        </div>
      </div>
    </div>

  </div> <!-- end type select -->



  <!-- FORM CONTAINER -->
	<div id="formContainer" style="display: none"> <!-- style="display: none-->

    <!-- Header -->
    <div id="formHeader" class="uncommon">
      <!-- to be apended -->
    </div>

    <!-- Form -->
    <form id="wprfApplication" class="form">

      <!-- COMMON BEGINNING -->
      <div id="commonBeginning">

        <!-- Owner Information -->
        <div class="row">
          <div class="col-12">
            <h5>Property Owner Information</h5>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentFirstName">Owner First Name: <span class="requiredField">*</span></label>
              <input type="text"  name="constituentFirstName" id="constituentFirstName" class="form-control" required>
            </div>
          </div>

          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentLastName">Owner Last Name: <span class="requiredField">*</span></label>
              <input type="text" name="constituentLastName" id="constituentLastName" class="form-control" required>
            </div>
          </div>
        </div>

        <div class="row">  
          <div class="col-12">
            <div class="form-group">
              <label for="constituentOrganization">Owner Company / Organization (if applicable)</label>
              <input type="text" name="constituentOrganization" id="constituentOrganization" class="form-control">
            </div>
          </div>
        </div>

        <!-- Tax Account(s) -->
        <div class="row">
          <div class="col-12">
            <h5>Tax Accounts</h5>
          </div>

          <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <div class="form-group">
              <label for="constituentTaxAccounts">Tax account number(s): <span class="requiredField">*</span></label>
              <input type="text" name="constituentTaxAccounts" id="constituentTaxAccounts" class="form-control" required>
              <!-- TODO: form-text block necessary? -->
              <div class="form-text"><a href="https://sdat.dat.maryland.gov/RealProperty/Pages/default.aspx" target="_blank">Look up your tax account number</a></div>
            </div>
          </div>	
        </div>

        <!-- Property Address -->
        <div class="row">
          <div class="col-12">
            <h5>Property Address</h5>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentAddress1">Street Address: <span class="requiredField">*</span></label>
              <input type="text" name="constituentAddress1" id="constituentAddress1" class="form-control" required>
            </div>
          </div>

          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="constituentAddress2">Address Line 2:</label>
              <input type="text" name="constituentAddress2" id="constituentAddress2" class="form-control">
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
            <div class="form-group">
              <label for="ownerCity">City: <span class="requiredField">*</span></label>
              <input type="text" name="ownerCity" id="ownerCity" class="form-control" required>
            </div>
          </div>   
          
          <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
            <div class="form-group">
              <label for="ownerState">State: <span class="requiredField">*</span></label>
              <input type="text" name="ownerState" id="ownerState" class="form-control" required>
            </div>
          </div>   

          <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
            <div class="form-group">
              <label for="ownerZip">Zip Code: <span class="requiredField">*</span></label>
              <input type="text" name="ownerZip" id="ownerZip" class="form-control" required>
            </div>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="row">
          <div class="col-12">
            <h5>Contact Information</h5>
          </div>
        </div>  

        <div class="row">
          <div class="col-12">
            <div class="form-group">
              Is applicant a person other than the property owner? <span class="requiredField">*</span><br>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="representativeYes" name="applicantRepresentative" 
                  value="yes" onchange="representativeToggle()" required>
                <label class="form-check-label" for="representativeYes">Yes</label>
              </div>
              
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="representativeNo" name="applicantRepresentative" 
                  value="no" onchange="representativeToggle()" required>
                <label class="form-check-label" for="representativeNo">No</label>
              </div>
            </div>
          </div>
        </div>

        <div id="representativeContactInfo" class="uncommon">
          <!-- append only if "representativeYes: checked" -->
        </div>

        <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="phone">Phone Number <span class="requiredField">*</span></label>
              <input type="text" id="phone" name="phone" class="form-control" required>
            </div>
          </div>

          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="email">Email Address <span class="requiredField">*</span></label>
              <input type="email" id="email" name="email" class="form-control" required>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="col-12">
            <h5>Mailing Address</h5>
          </div>
        </div>  

        <div class="row">
          <div class="col-12">
            <div class="form-group">
              Is the mailing address different than the property address? <span class="requiredField">*</span><br>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="mailingDifferentYes" name="mailingDifferent" 
                  value="yes" onchange="mailingAddressToggle()" required>
                <label class="form-check-label" for="mailingDifferentYes">Yes</label>
              </div>
              
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" id="mailingDifferentNo" name="mailingDifferent" 
                  value="no" onchange="mailingAddressToggle()" required>
                <label class="form-check-label" for="mailingDifferentNo">No</label>
              </div>
            </div>
          </div>
        </div>

        <div id="mailingAddress" class="uncommon">
          <!-- append only if "mailingDifferentYes: checked" -->
        </div>
      </div> <!-- End common beginning -->


      <!-- UNCOMMON MIDDLE -->
      <div id="uncommonMiddle" class="uncommon">
        <!-- to be appended w/ selected appeal or credit type(s) -->
      </div>


      <!-- COMMON ENDING -->
      <div id="commonEnding">

        <!-- jsonData.supportingDoc = ''; --> 
        <div class="row">
          <div class="col-12">
            <h5>Supporting Documentation</h5>
          </div>
        </div> 

        <div class="row">
          <div class="col-12">
            <div class="form-group">
              <!-- <label for="supportingDoc">Supporting Documentation</label> -->
              <input class="form-control-file" type="file" id="supportingDoc" name="supportingDoc" multiple>
            </div>
          </div>
        </div>
        

        <div id="statement" class="uncommon">
          <!-- to be appended w/ appeal acknowledgement or credit authorization  -->
        </div>


        <!-- <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="signature">Signature <span class="requiredField">*</span></label>
              <div id="signature"></div>
            </div>
          </div>
        </div> -->

        <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="signaturePrinted">Printed Signature <span class="requiredField">*</span></label>
              <input type="text" id="signaturePrinted" name="signaturePrinted" class="form-control" required>
            </div>
          </div>

          <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div class="form-group">
              <label for="signatureTitle">Title (if applicable)</label>
              <input type="text" name="signatureTitle" id="signatureTitle" class="form-control" required>
            </div>
          </div>
        </div>

        <div class="row">  
          <div class="col-12">
            <div class="form-group">
              <label for="signatureOrganization">Company / Organization (if applicable)</label>
              <input type="text" name="signatureOrganization" id="signatureOrganization" class="form-control">
            </div>
          </div>
        </div>


        <!-- Submit -->
        <div class="row">
          <div class="col-12">
            <div id="requiredHelpBlock" class="form-text">
              <p>Fields marked with <span class="requiredField">*</span> are required</p>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <button class="btn btn-primary" type="submit" id="submitButton" >Submit Form</button>
          </div>
        </div>
      </div> <!-- End common ending -->

		</form>
  </div><!-- End form container -->



<!-- UNCOMMON DIVS -->
<!-- To be appended based on selection -->
<!-- TODO: change words "application" to "form"? -->
<div id="uncommonForms" style="display: none">

  <div id="representativeApplication">
    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
        <div class="form-group">
          <label for="applicantFirstName">Applicant First Name: <span class="requiredField">*</span></label>
          <input type="text"  name="applicantFirstName" id="applicantFirstName" class="form-control" required>
        </div>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
        <div class="form-group">
          <label for="applicantLastName">Applicant Last Name: <span class="requiredField">*</span></label>
          <input type="text" name="applicantLastName" id="applicantLastName" class="form-control" required>
        </div>
      </div>
    </div>

    <div class="row">  
      <div class="col-12">
        <div class="form-group">
          <label for="applicantOrganization">Applicant Company / Organization (if applicable)</label>
          <input type="text" name="applicantOrganization" id="applicantOrganization" class="form-control">
        </div>
      </div>
    </div>
  </div>

  <div id="mailingAddressApplication">
    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
        <div class="form-group">
          <label for="mailingAddress1">Street Address: <span class="requiredField">*</span></label>
          <input type="text" name="mailingAddress1" id="mailingAddress1" class="form-control" required>
        </div>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
        <div class="form-group">
          <label for="mailingAddress2">Address Line 2:</label>
          <input type="text" name="mailingAddress2" id="mailingAddress2" class="form-control">
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
        <div class="form-group">
          <label for="mailingCity">City: <span class="requiredField">*</span></label>
          <input type="text" name="mailingCity" id="mailingCity" class="form-control" required>
        </div>
      </div>   
      
      <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
        <div class="form-group">
          <label for="mailingState">State: <span class="requiredField">*</span></label>
          <input type="text" name="mailingState" id="mailingState" class="form-control" required>
        </div>
      </div>   

      <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
        <div class="form-group">
          <label for="mailingZip">Zip Code: <span class="requiredField">*</span></label>
          <input type="text" name="mailingZip" id="mailingZip" class="form-control" required>
        </div>
      </div>
    </div>
  </div>


  <!-- Headers -->
  <div id="appealHeader">
    <div class="row">
      <div class="col-12">
        <h4>Stormwater Fee Appeal Application</h4> 
      </div>
    </div>
  </div>

  <div id="creditHeader">
    <div class="row">
      <div class="col-12">
        <h4>Stormwater Credit Application</h4>
      </div>
    </div>
  </div>


  <!-- APPEAL APPLICATIONS -->
  <!-- Appeal Type 1: Property places in wrong residential tier -->
  <div id="appeal1Application">
    <div class="row">
      <div class="col-12">
        <h5>Appeal Basis 1: Property placed in wrong residental tier</h5>
      </div>
    </div>

    <!-- Residental Property Tier info -->
    <div class="form-group">
      <div class="row">
        <div class="col-12">
          <div style="background-color: #f0f0f0; padding: 10px">
            <b><i class="fas fa-info-circle" style="color: #0072bc; margin-right: 5px"></i>List of Residential Tiers</b>
            <ul style="margin-left: 20px">
              <li>WPRF01 / Tier 1: Residential property with a detached single family dwelling in Rural Agricultural (RA) or
                Residential Low Density (RLD) zoning</li>
              <li>WPRF02 / Tier 2: Residential property with a detached single family dwelling in R1, R2, or R5 residential
                zoning</li>
              <li>WPRF03 / Tier 3: Residential property in R10 or R15 residential zoning or an attached dwelling in RA, 
                RLD, R1, R2, or R5 zoning
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <div class="form-group">
      <div class="row">
        <div class="col-12">
          On the property tax bill, <br>
          <div class="form-select">
            <label for="a1TierCurrent">The property is currently classified as: 
              <span class="requiredField">*</span></label>
            <select class="form-select" name="a1TierCurrent" id="a1TierCurrent" aria-label="a1TierCurrent" required>
              <option selected value="">Please select</option>
              <option value="WPRF01">WPRF01: Tier 1 Residential</option>
              <option value="WPRF02">WPRF02: Tier 2 Residential</option>
              <option value="WPRF03">WPRF03: Tier 3 Residential</option>
            </select>
          </div>
        </div>

        <div class="col-12">
          <div class="form-select">
            <label for="a1TierProposed">The property should be classified as: 
              <span class="requiredField">*</span></label>
              <!-- TODO: onchange: cannot be the same as a1TierCurrent -->
            <select class="form-select" name="a1TierProposed" id="a1TierProposed" aria-label="a1TierProposed" required>
              <option selected value="">Please select</option>
              <option value="WPRF01">WPRF01: Tier 1 Residential</option>
              <option value="WPRF02">WPRF02: Tier 2 Residential</option>
              <option value="WPRF03">WPRF03: Tier 3 Residential</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="form-group">
          Reason: <span class="requiredField">*</span><br>
          <div class="form-check">
            <input class="form-check-input" type="radio" id="a1Reason1" name="a1Reason" 
              value="The property's tier is incorrect based on its zoning" required>
            <label class="form-check-label" for="a1Reason1">The property's tier is incorrect based on its zoning</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="radio" id="a1Reason2" name="a1Reason" 
              value="The property is an attached dwelling in residential zoning but is not categorized as Tier 3" required>
            <label class="form-check-label" for="a1Reason2">The property is an attached dwelling in residential zoning but is not 
                categorized as Tier 3</label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="radio" id="a1Reason3" name="a1Reason" 
              value="The property should be classified as the next lower tier due to the amount of impervious surface on site" required>
            <label class="form-check-label" for="a1Reason3">The property should be classified as the next lower tier due to the 
                amount of impervious surface on site (Less than 2,900 sq ft for a Tier 1 property; 
                Less than 1,200 sq ft for a Tier 2 property)</label>
          </div>
        </div>
      </div>
    </div>

    <!-- TODO: include this in the radio button form-group row? -->
    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <div id="a1ReasonHelpBlock" class="form-text">Use the <a href="www.aacounty.org/myannearundel" target="_blank">
            My Anne Arundel application</a> to look up information on the stormwater fee, impervious amounts, and property zoning. 
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <label for="a1Comments">Comments: </label>
          <textarea class="form-control" id="a1Comments" rows="3"></textarea>
        </div>
      </div>
    </div>
  </div> <!-- End appeal 1 application -->


  <!-- Appeal Type 1: Incorrect classification of	property -->
  <div id="appeal2Application">
    <div class="row">
      <div class="col-12">
        <h5>Appeal Basis 2: Incorrect classification of	property</h5>
      </div>
    </div>
  </div> <!-- End appeal 2 application -->


  <!-- Appeal Type 3: Homeowner's Association property where the fee cap is applicable but was not applied -->
  <div id="appeal3Application">
    <div class="row">
      <div class="col-12">
        <h5>Appeal Basis 3: Homeowner's Association property where the fee cap is 
          applicable but was not applied</h5>
      </div>
    </div>
  </div> <!-- End appeal 3 application -->


  <!-- Appeal Type 4: Mathematical error or incorrect	impervious surface calculation -->
  <div id="appeal4Application">
    <div class="row">
      <div class="col-12">
        <h5>Appeal Basis 4: Mathematical error or incorrect	impervious surface calculation</h5>
      </div>
    </div>
  </div> <!-- End appeal 4 application -->


  <!-- Appeal Type 5: Exempt or incorrect property owner -->  
  <div id="appeal5Application">
    <div class="row">
      <div class="col-12">
        <h5>Appeal Basis 5: Exempt or incorrect property owner</h5>
      </div>
    </div>
  </div> <!-- End appeal 5 application -->


  <!-- CREDIT APPLICATIONS -->
  <!-- Credit Type 1: Property not under an NPDES permit -->
  <div id="credit1Application">
    <div class="row">
      <div class="col-12">
        <h5>Credit Type 1: Property not under an NPDES permit</h5>
      </div>
    </div>

    <div class="row form-group">
      <div class="col-12">
        <div class="form-group">
          <label for="c1Description">Briefly describe the stormwater practices on the property (type, quantity, location): <span class="requiredField">*</span></label>
          <textarea class="form-control" id="c1Description" rows="3" required></textarea>
        </div>
      </div>
    </div>
  </div>


  <!-- Credit Type 2: Property with an NPDES permit that includes stormwater management controls -->
  <div id="credit2Application">
    <div class="row">
      <div class="col-12">
        <h5>Credit Type 2: Property with an NPDES permit that includes stormwater management controls</h5>
      </div>
    </div> 

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
        <div class="form-group">
          <label for="c2NPDESPermitNumber">NPDES Permit Number: <span class="requiredField">*</span></label>
          <input type="text" id="c2NPDESPermitNumber" class="form-control" required>
        </div>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
        <div class="form-group">
          <label for="c2RegistrationNumber">MDE Facility Registration Number: <span class="requiredField">*</span></label>
          <input type="text" id="c2RegistrationNumber" class="form-control" required>
        </div>
      </div>
    </div>
  </div>


  <!-- Statement Authentication -->
  <div id="appealAcknowledgement">
    <div class="row">
      <div class="col-12">
        <h5>Acknowledgement</h5>
      </div>
    </div> 

    <div class="form-group">
      <div class="col-12">
        I/we, the undersigned do hereby declare under the penalties of perjury that the information 
        provided on and with this application is, to the best of my/our knowledge and belief, true, correct, 
        and complete.  I/we also understand that the failure to provide all information and/or documentation 
        as required is a basis for a denial of the appeal. I/we understand that by filing this appeal, we are 
        authorizing the Department of Public Works to confirm the information provided with this application, 
        including, but not limited to, inspecting and entering the property to verify the amount of impervious 
        surface area. I/we understand that if the Department of Public Works grants the appeal and it results 
        in a change in the stormwater remediation fee, I/we will be issued a new bill.  I/we understand that if 
        I/we are aggrieved by the decision of the Department of Public Works, I/we shall pay the stormwater 
        remediation fee, may request a refund and if a refund is denied, may appeal to the Maryland Tax Court 
        in accordance with Article 24, § 9-710 and 9-712 of the Annotated Code of Maryland. 
      </div>

      <div class="row">
        <div class="col-12">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="statementAppeal" name="statementAppeal" value="acknowledged" required>
            <label class="form-check-label" for="statementAppeal">I acknowledge <span class="requiredField">*</span></label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="creditAuthorization">
    <div class="row">
      <div class="col-12">
        <h5>Authorization</h5>
      </div>
    </div> 

    <div class="form-group">
      <div class="col-12">
        By signing this form, you certify that (1) you have read and understand the Stormwater 
        Remediation Credit Policy and Guidance requirements; (2) the information provided on this 
        form is complete and factual; (3) the stormwater management system(s) on your property 
        have been maintained and are in proper working order; and (4) you grant the County 
        permission to conduct site inspections of the stormwater management practices 
        included as part of this application package.
      </div>

      <div class="row">
        <div class="col-12">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="statementCredit" name="statementCredit" value="authorized" required>
            <label class="form-check-label" for="statementCredit">I authorize <span class="requiredField">*</span></label>
          </div>
        </div>
      </div>
    </div>
  </div>

</div> <!-- End "display: none" uncommon divs-->

  
</div> <!-- end bootstrap-iso container -->
	
  

  <!-- Script imports -->
  <!-- jQuery (must come before Bootstrap & Popper.js) -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>

  <!-- Popper.js (must come after jQuery, before Bootstrap js) -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" 
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" 
    crossorigin="anonymous"></script>

  <!-- Bootstrap js script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" 
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" 
    crossorigin="anonymous"></script>
  
  <!-- Axios -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</body>



<!-- JavaScript -->
<script type="text/javascript">
  
  const form = document.getElementById('wprfApplication');
  let selected = []; //user selection array
  const jsonData = {}; //json submit object
  //case manager object
  const cmObject = {
    caseTypeUUID: '6d788088-0501-4db3-82b2-9a72bf61820f',
    jsonData: jsonData,
  };

  // combine utility functions later
  // const representative = document.getElementsByName("applicantRepresentative");
  // representative.addEventListener('change', (event) => {
  // });
  function mailingAddressToggle() {
    if (document.getElementById("mailingDifferentYes").checked) {
      console.log('yes');
      // TODO: this doesnt reset when form is reset
      $("#mailingAddress").html($("#mailingAddressApplication").html());
    }
    else {
      console.log('no');
      $("#mailingAddress").html("");
    }
  }

    
  // combine utility functions later
  function representativeToggle() {
    if (document.getElementById("representativeYes").checked) {
      console.log('yes');
      $("#representativeContactInfo").html($("#representativeApplication").html());
    }
    else {
      console.log('no');
      $("#representativeContactInfo").html("");
    }
  }

  // BACK BUTTON 
  $("#backButton").click(function() {

    if ($("#appeal").is(":visible") || $("#credit").is(":visible"))
    {
      console.log("Leaving application type select")
      //window.location.reload(); //default
      //show initial options
      $("#navigation, #appeal, #credit").hide();
      $("#applicationSelect").show();      
    }
    
    else if ($("#formContainer").is(":visible"))
    {
      console.log("Leaving application")
      //window.location.reload(); //default
      // display(selected[0]); //show application types 
      $("#" + selected[0]).show();  
      console.log('reset middle div');
      //$("#uncommonMiddle").html(""); //reset the contents of middle div
      $("#formContainer").hide();      
    }

    else
    {
      console.log("Default - page refresh")
      window.location.reload(); //default
    }
  });



  // SHOW APPLICATION TYPE
  function showApplicationTypes(applicationType) {

    // reset selected array
    selected.length = 0;

    // reset appeal checkboxes
    console.log('resetting checkboxes')
    $('input[type=checkbox]').prop('checked', false);

    // reset form
    console.log('resetting form')
    document.getElementById('wprfApplication').reset();
    // reset uncommon divs
    $(".uncommon").html("");

    //add choice to array
    selected.push(applicationType);
    $("#showError").html("You selected: " + selected);

    //show application
    $("#" + selected[0]).show();
    //hide initial options
    $("#navigation").show();
    $("#applicationSelect").hide();
    // TODO: reset checkboxes somehow (default, checked: false)

    // Print selections so far
    console.log(JSON.stringify(selected));
  }



  // SHOW CREDIT APPLICATION
  function showCreditApplication(creditType) {
    
    console.log("Reset uncommon members (array, middle div, form header)");
    selected.length = 1; //truncate the contents of the selected array
    $("#uncommonMiddle").html(""); //reset the contents of middle div
    $("#formHeader").html($("#creditHeader").html()); //set header
    $("#statement").html($("#creditAuthorization").html()); //append credit authorization

    console.log("Populate array data & append middle div");
    switch (creditType) {
      case "creditType1":
        $("#uncommonMiddle").html($("#credit1Application").html());
        selected.push(creditType);
        break;

      case "creditType2":
        $("#uncommonMiddle").html($("#credit2Application").html());
        selected.push(creditType);
        break;
        
      default:
        $("#showError").html("Error appending credit types");
    }   

    console.log("Show credit application");
    $("#credit").hide(); //hide credit select  
    $("#formContainer").show(); //show form

    // Print selections so far
    console.log(JSON.stringify(selected));
    $("#showError").html("You selected: " + selected);
  }



  // SHOW APPEAL APPLICATION
  function showAppealApplication() {

    console.log("Validate checkboxes");
    if (validateCheckboxes("#appeal") == false)
    $("#showError").html("Please select at least one appeal type.");

    else
    {
      console.log("Reset uncommon members (array, middle div, form header)");           
      selected.length = 1; //truncate the contents of the selected array
      $("#uncommonMiddle").html(""); //reset the contents of middle div
      $("#formHeader").html($("#appealHeader").html()); //set header
      $("#statement").html($("#appealAcknowledgement").html()); //append credit authorization

      console.log("Populate array data");
      populateSelectedAppealTypes();

      console.log("Append middle div");
      for (var i = 1; i < selected.length; i++)
      {
        //append divs written outside the form, rather than variables
        console.log("Appending matching appeal types");
        switch (selected[i]) {
          case "appealType1":
            $("#uncommonMiddle").append($("#appeal1Application").html());
            break;

          case "appealType2":
            $("#uncommonMiddle").append($("#appeal2Application").html());
            break;

          case "appealType3":
            $("#uncommonMiddle").append($("#appeal3Application").html());
            break;

          case "appealType4":
            $("#uncommonMiddle").append($("#appeal4Application").html());
            break;
          
          case "appealType5":
            $("#uncommonMiddle").append($("#appeal5Application").html());
            break;

          default:
            $("#showError").html("Error appending appeal types.");
        }   
      }

      console.log("Show appeal application");
      $("#appeal").hide(); //hide appeal select  
      $("#formContainer").show(); //show header and form

      // Print selections so far
      console.log(JSON.stringify(selected));
      $("#showError").html("You selected: " + selected);
    }  
  }


  // Validate checked checkboxes is > 0
  //@param The element id to be checked (can be used for other form checkboxes)
  function validateCheckboxes(element) {

    // Reference the checked checkboxes of the element
    var numChecked = $(element + " input[type=checkbox]:checked").length;
    console.log("\t" + numChecked + " checkboxes are checked");

    if (numChecked > 0) 
    {
      console.log("\tPASS")
      return true;
    } 
    else 
    {
      console.log("\tFAIL")
      return false;
    }
  }


  // Populate array selection data in the selected array
  function populateSelectedAppealTypes() {

    // Create a local array of current appeal ids
    let appealCheckbox = document.querySelectorAll('input[name="appealCheckbox"]'); 
    let appealTypeIds = [];

    appealCheckbox.forEach((checkbox) => {
      appealTypeIds.push(checkbox.id); 
    });

    // Loop through checkboxes
    for (var i = 0; i < appealTypeIds.length; i++)
    {
      // If checkbox is checked,
      if (document.getElementById(appealTypeIds[i]).checked) {
        console.log("\tChecked: " + appealTypeIds[i]);
        // add to selected array
        selected.push(appealTypeIds[i]);
      }

      // If checkbox is NOT checked,
      else if (!document.getElementById(appealTypeIds[i]).checked)
      {
        // hide / print to console
        // console.log("\t" + appealTypeIds[i]);
      }

      else 
        console.log("\tError populating selected appeals in array");
    } 
  }

  // TODO format comments to match jsdoc
  // @Desc: Handle Form Submit
  form.addEventListener('submit', (event) => {
    // event.preventDefault(); //preventing page refresh?
    console.log(event);

    //populate common json data
    jsonData.constituentFirstName = $('#constituentFirstName').val(); //ownerFirstName
    jsonData.constituentLastName = $('#constituentLastName').val(); //ownerLastName
    jsonData.constituentOrganization = $('constituentOrganization').val(); //ownerOrganization
    jsonData.constituentAddress1 = $('#constituentAddress1').val(); //propertyAddress1
    jsonData.constituentAddress2 = $('#constituentAddress2').val(); //propertyAddress2
    jsonData.ownerCity = $('#ownerCity').val(); //propertyCity
    jsonData.ownerState = $('#ownerState').val(); //propertyState
    jsonData.ownerZip = $('#ownerZip').val(); //propertyZip
    jsonData.applicantRepresentative = $('input[name="applicantRepresentative"]:checked').val(); //yes or no
      if (jsonData.applicantRepresentative == 'yes') {
        jsonData.applicantFirstName = $('#applicantFirstName').val();
        jsonData.applicantLastName = $('#applicantLastName').val();
        jsonData.applicantOrganization = $('#applicantOrganization').val();
      }
    jsonData.phone = $('#phone').val();
    jsonData.email = $('#email').val();
    jsonData.mailingDifferent = $('input[name="mailingDifferent"]:checked').val(); //yes or no
      if (jsonData.mailingDifferent == 'yes') {
        jsonData.mailingAddress1 = $('#mailingAddress1').val();
        jsonData.mailingAddress2 = $('#mailingAddress2').val();
        jsonData.mailingCity = $('#mailingCity').val();
        jsonData.mailingState = $('#mailingState').val();
        jsonData.mailingZip = $('#mailingZip').val();
      }
    jsonData.applicationType = selected[0];

    //populate uncommon selections from array
    for (var i = 1; i < selected.length; i++)
      populateUncommonJson(selected[i]);

    jsonData.supportingDoc = '';
    if (jsonData.applicationType == 'appeal')
      jsonData.statementAppeal = $('input[name="statementAppeal"]:checked').val();
    else if (jsonData.applicationType == 'credit')
      jsonData.statementCredit = $('input[name="statementCredit"]:checked').val();
    
    //jsonData.signature = ''; 
    jsonData.signaturePrinted = $('#signaturePrinted').val();
    jsonData.signatureTitle = $('#signatureTitle').val();
    jsonData.signatureOrganization = $('#signatureOrganization').val();

    console.log('Post object', JSON.stringify(cmObject));
    postToIssueFlow();
  });

  
  //populate json based on user selection
  function populateUncommonJson(element) {
    //console.log('populateUncommonJson()');

    switch (element) {
      case 'appealType1':
        jsonData.appealType1 = $('#appealType1').val();
        jsonData.a1TierCurrent = $('#a1TierCurrent').val();
        jsonData.a1TierProposed = $('#a1TierProposed').val();
        jsonData.a1Reason = $('#a1Reason').val();
        jsonData.a1Comments = $('#a1Comments').val();
        break;

      case 'creditType1':
        jsonData.creditType = $('#creditType2').val();
        jsonData.c1Description = $('#c1Description').val();
        break;

      case 'creditType2':
        jsonData.creditType = $('#creditType2').val();          
        jsonData.c2NPDESPermitNumber = $('#c2NPDESPermitNumber').val();
        jsonData.c2RegistrationNumber = $('#c2RegistrationNumber').val();
        break;

      default:
        console.log("Error populating uncommon JSON")
    }
  }


// EXAMPLE FROM PIA FORM:
  const postToIssueFlow = () => {
    let config = {
      headers: {
        Authorization: '933540812E9970aB83486CA5m06Bte126BD5Faf523F',
      },
    };
    let url = 'https://issueflowtest.aacounty.org/caseManagerDirect';
    axios
      .post(url, cmObject, config)
      .then(function (response) {
        console.log(response);
        window.scrollTo(0, 0);
        // $('#formTitle').hide();
        // $('#piaForm').hide();
        // $('#message').show();
      })
    .catch(function (error) {
      console.log({ error: error, message: 'Error posting to Case Manager' });
    });
  };

</script>
</html>